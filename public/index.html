<!DOCTYPE html>
<html>
	<head>
		<title>Chat</title>
		<link rel="stylesheet" href="../css/main.css">
	</head>
	<body>
		<div class="chat">
			<input type="text" class="chat-name" placeholder="Enter your name">
			<div class="chat-messages">
				<div class="chat-message">
					
				</div>
			</div>
			<textarea class="chat-textarea" placeholder="Type your message"></textarea>
			<div class="chat-status">
				Status: <span>Idle</span>
			</div>
		</div>
		
		<script src="http://104.236.10.215:3000/socket.io/socket.io.js"></script>
		<script>
			(function(){
				var getNode = function(s){
					return document.querySelector(s);
				},
				textarea = getNode('.chat-textarea'),
				chatName = getNode('.chat-name');
				
				try{
					var socket = io.connect('http://104.236.10.215:3000/');
				}catch(e){
					
				}
				
				if(socket !== undefined){
					textarea.addEventListener('keydown',function(e){
						var self = this,
							name = chatName.value;	
						
						if(e.which === 13 && e.shiftKey === false){
							socket.emit('input',{
								name:name,
								message:self.value
							});
							
							e.preventDefault();
						}
						
					});
				}
				
			})();
		</script>
	</body>
</html>